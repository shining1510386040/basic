# 工程简介

spring secruity 安全认证（token认证）

参考链接：https://www.hangge.com/blog/cache/detail_2683.html


# 延伸阅读

1，什么是 OAuth 2?

    OAuth 是一个开放标准，该标准允许用户让第三方应用访问该用户在某一网站上存储的私密资源（如头像、照片、视频等），而在这个过程中无须将用户名和密码提供给第三方应用。实现这一功能是通过提供一个令牌（token），而不是用户名和密码来访问他们存放在特定服务提供者的数据。
    每一个令牌授权一个特定的网站在特定的时段内访问特定的资源。这样，OAuth 让用户可以授权第三方网站灵活地访问存储在另外一些资源服务器的特定信息，而非所有内容。目前主流的 qq，微信等第三方授权登录方式都是基于 OAuth2 实现的。
    OAuth 2 是 OAuth 协议的下一版本，但不向下兼容 OAuth 1.0。OAuth 2 关注客户端开发者的简易性，同时为 Web 应用、桌面应用、移动设备、起居室设备提供专门的认证流程。
    传统的 Web 开发登录认证一般都是基于 Session 的，但是在前后端分离的架构中继续使用 Session 会有许多不便，因为移动端（Android、iOS、微信小程序等）要么不支持Cookie（微信小程序），要么使用非常不便，对于这些问题，使用 OAuth 2 认证都能解决。


2，OAuth 2 角色
OAuth 2 标准中定义了以下几种角色：

    资源所有者（Resource Owner）：即代表授权客户端访问本身资源信息的用户，客户端访问用户帐户的权限仅限于用户授权的“范围”。
    客户端（Client）：即代表意图访问受限资源的第三方应用。在访问实现之前，它必须先经过用户者授权，并且获得的授权凭证将进一步由授权服务器进行验证。
    授权服务器（Authorization Server）：授权服务器用来验证用户提供的信息是否正确，并返回一个令牌给第三方应用。
    资源服务器（Resource Server）：资源服务器是提供给用户资源的服务器，例如头像、照片、视频等。

注意：一般来说，授权服务器和资源服务器可以是同一台服务器。

3，OAuth 2 授权流程
下面是 OAuth 2 一个大致的授权流程图：
原文:SpringBoot - 使用Spring Security实现OAuth2授权认证教程（实现token认证）

    步骤1：客户端（第三方应用）向用户请求授权。
    步骤2：用户单击客户端所呈现的服务授权页面上的同意授权按钮后，服务端返回一个授权许可凭证给客户端。
    步骤3：客户端拿着授权许可凭证去授权服务器申请令牌。
    步骤4：授权服务器验证信息无误后，发放令牌给客户端。
    步骤5：客户端拿着令牌去资源服务器访问资源。
    步骤6：资源服务器验证令牌无误后开放资源。


4，OAuth 2 授权模式
OAuth 协议的授权模式共分为 4 种，分别说明如下：

    授权码模式：授权码模式（authorization code）是功能最完整、流程最严谨的授权模式。它的特点就是通过客户端的服务器与授权服务器进行交互，国内常见的第三方平台登录功能基本 都是使用这种模式。
    简化模式：简化模式不需要客户端服务器参与，直接在浏览器中向授权服务器中请令牌，一般若网站是纯静态页面，则可以采用这种方式。
    密码模式：密码模式是用户把用户名密码直接告诉客户端，客户端使用这些信息向授权服务器中请令牌。这需要用户对客户端高度信任，例如客户端应用和服务提供商是同一家公司。
    客户端模式：客户端模式是指客户端使用自己的名义而不是用户的名义向服务提供者申请授权。严格来说，客户端模式并不能算作 OAuth 协议要解决的问题的一种解决方案，但是，对于开发者而言，在一些前后端分离应用或者为移动端提供的认证授权服务器上使用这种模式还是非常方便的。 


==========================================>>>>>>>
Spring Security 核心接口：
TokenStore：token存储接口，
    具体实现：JdbcTokenStore、InMemoryTokenStore、RedisTokenStore、JwtTokenStore
    生产上一般选择redis；

TokenEndpoint:
   获取token： localhost:8080/oauth/token
   
    